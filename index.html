<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carta de Spiderman</title>
  <style>
    /* Reset CSS */
    * {
      min-width: 0;
      font: inherit;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    img,
    video,
    svg {
      display: block;
      height: auto;
      max-width: 100%;
    }

    body {
      margin: 0;
      min-height: 100dvh;
      background-color: #fad7df;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px; /* Espaciado para móviles */
    }

    h1,
    h2,
    h3 {
      text-wrap: balance;
    }

    p {
      text-wrap: pretty;
    }

    /* Estilos principales */
    main {
      display: flex;
      flex-direction: column;
      gap: 2rem;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 400px; /* Ancho máximo para móviles */
    }

    .container-letter {
      position: relative;
      width: 100%;
    }

    .cover {
      position: absolute;
      border-left: 150px solid transparent; /* Reducido para móviles */
      border-right: 150px solid transparent; /* Reducido para móviles */
      border-top: 75px solid #fe3334; /* Reducido para móviles */
      border-bottom: 75px solid transparent; /* Reducido para móviles */
      transition: transform 0.75s;
      transform-origin: top;
    }

    .paper {
      position: absolute;
      padding: 1rem; /* Reducido para móviles */
      line-height: 1.5rem; /* Reducido para móviles */
      right: 5px;
      z-index: -1;
      background: white;
      width: 100%;
      max-width: 300px; /* Reducido para móviles */
      height: 150px; /* Reducido para móviles */
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: all 0.75s;
    }

    .letter {
      border-left: 150px solid #ff989e; /* Reducido para móviles */
      border-right: 150px solid #ff989e; /* Reducido para móviles */
      border-top: 75px solid transparent; /* Reducido para móviles */
      border-bottom: 75px solid #ff858a; /* Reducido para móviles */
    }

    .options {
      display: flex;
      gap: 2rem; /* Reducido para móviles */
      margin-top: 1rem; /* Reducido para móviles */
    }

    .options button {
      color: #ff3234;
      font-weight: 600;
      border-radius: 3px;
      background: #fad7df;
      padding: 0.5rem 1rem;
      border: 1px solid #fe3334;
      cursor: pointer;
      font-size: 1rem; /* Ajustado para móviles */
    }

    .options button:hover {
      background: #ff989e;
      color: white;
    }

    .open-cover {
      transform: rotatex(180deg);
    }

    .open-paper {
      animation: openPaper 0.5s forwards;
    }

    @keyframes openPaper {
      0% {
        top: 0;
      }
      100% {
        top: -100px; /* Reducido para móviles */
      }
    }

    .close-paper {
      animation: closePaper 0.5s forwards;
    }

    @keyframes closePaper {
      0% {
        top: -100px; /* Reducido para móviles */
      }
      100% {
        top: 0;
      }
    }

    .heart {
      display: none;
      position: absolute;
      top: 25%;
      left: 46.5%;
      margin: auto;
      font-size: 2rem; /* Reducido para móviles */
      color: #fe3334;
      animation: crecer 1s forwards;
    }

    @keyframes crecer {
      0% {
        scale: 1;
        opacity: 1;
      }
      100% {
        scale: 3;
        opacity: 0;
      }
    }

    /* Estilos para el rostro de Spiderman */
    .spiderman-face {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px; /* Reducido para móviles */
      height: auto;
      z-index: 10;
      animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.5);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    /* Media queries para móviles */
    @media (max-width: 600px) {
      .cover {
        border-left: 100px solid transparent;
        border-right: 100px solid transparent;
        border-top: 50px solid #fe3334;
        border-bottom: 50px solid transparent;
      }

      .paper {
        padding: 0.75rem;
        line-height: 1.25rem;
        max-width: 250px;
        height: 120px;
      }

      .letter {
        border-left: 100px solid #ff989e;
        border-right: 100px solid #ff989e;
        border-top: 50px solid transparent;
        border-bottom: 50px solid #ff858a;
      }

      .options {
        gap: 1rem;
      }

      .options button {
        font-size: 0.875rem;
        padding: 0.4rem 0.8rem;
      }

      .heart {
        font-size: 1.5rem;
      }

      .spiderman-face {
        width: 60px;
      }
    }
  </style>
</head>
<body>
  <main>
    <div class="container-letter">
      <div class="cover"></div>
      <span class="heart">♥</span>
      <p class="paper" id="mainMessage">
        Querida Janeth,

Llevo días pensando en cómo expresarte esto de la mejor manera, porque es algo que siento con sinceridad. Quiero que sepas que me gustaría volver a enamorarte, construir algo bonito y duradero a tu lado. He reflexionado mucho sobre el pasado y reconozco que no era el mismo chico que conociste; antes era indeciso y no tenía claro lo que quería. Pero ahora estoy buscando algo bueno, algo verdadero, que no sea solo de un momento, sino que valga la pena.

Quiero que sepas que no tengo intenciones de hacerte daño ni de jugar contigo. Al contrario, me gustaría tratarte como te mereces, con respeto y cariño, y ver si podemos construir algo juntos. Disculpa si soy muy directo o si algo de lo que dije no sonó bien, solo quería ser honesto contigo.

Atentamente, Kevin
      </p>
      <div class="letter"></div>
    </div>
    <div class="options">
      <button id="open">Abrir</button>
      <button id="close">Cerrar</button>
    </div>
  </main>
  <script>
    // Leer mensaje personalizado desde los parámetros de la URL
    const urlSearchParams = new URLSearchParams(window.location.search);
    const messageCustom = urlSearchParams.get('message');

    if (messageCustom) {
      const mainMessageElement = document.querySelector('#mainMessage');
      mainMessageElement.textContent = decodeURI(messageCustom);
    }

    // Seleccionar elementos del DOM
    const btnOpenElement = document.querySelector('#open');
    const btnCloseElement = document.querySelector('#close');
    btnCloseElement.disabled = true;

    // Función para mostrar el rostro de Spiderman
    function showSpiderman() {
      const spiderman = document.createElement('img');
      spiderman.src = 'spider.png'; // Ruta local de la imagen
      spiderman.classList.add('spiderman-face');
      document.querySelector('.container-letter').appendChild(spiderman);

      // Ocultar después de 5 segundos
      setTimeout(() => {
        spiderman.remove();
      }, 5000); // 5000 ms = 5 segundos
    }

    // Evento para abrir la carta
    btnOpenElement.addEventListener('click', () => {
      btnOpenElement.disabled = true;
      btnCloseElement.disabled = false;

      const coverElement = document.querySelector('.cover');
      coverElement.classList.add('open-cover');

      setTimeout(() => {
        coverElement.style.zIndex = -1;

        const paperElement = document.querySelector('.paper');
        paperElement.classList.remove('close-paper');
        paperElement.classList.add('open-paper');

        // Mostrar el rostro de Spiderman
        showSpiderman();
      }, 500);
    });

    // Evento para cerrar la carta
    btnCloseElement.addEventListener('click', () => {
      btnOpenElement.disabled = false;
      btnCloseElement.disabled = true;

      const coverElement = document.querySelector('.cover');
      const paperElement = document.querySelector('.paper');
      paperElement.classList.remove('open-paper');
      paperElement.classList.add('close-paper');

      setTimeout(() => {
        coverElement.style.zIndex = 0;
        coverElement.classList.remove('open-cover');
      }, 500);
    });
  </script>
</body>
</html>
